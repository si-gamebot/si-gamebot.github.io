import PFRNG from"../pfrng.js";const Util={t(e,t){const s=10**t;return Math.round(e*s)/s},i(e,t){const s=10**t;return Math.floor(e*s)/s},o:e=>/^!\w+/.test(e),h(e){let t=e.split(" ");return{name:t.shift().toLowerCase(),l:t}},g(e,t){const s=e.indexOf(t);-1!==s&&e.splice(s,1)},m(e,t){const s=this.u(e,t);-1!==s&&e.splice(s,1)},p(e,t){const s=t.toLowerCase();for(const t of e)if(s===t.toLowerCase())return!0;return!1},M:(e,t)=>e.toLowerCase()===t.toLowerCase(),u(e,t){const s=t.toLowerCase();for(let t=0;t<e.length;t++)if(e[t].toLowerCase()===s)return t;return-1},_(e,t){console.log("arr_str_value_i:"),console.log(e),console.log(t);return e[this.u(e,t)]},H:(e,t)=>e+Math.floor((t-e)*Math.random()+1),L(e){if("string"!=typeof e)throw new Error("Expected string, got "+typeof e);if(e.length>16)return null;e=e.toUpperCase();return/^\d+(\.\d+)?[KMBT]?$/.test(e)?(/[KMBT]$/.test(e)&&(e=(e=(e=(e=e.replace("K","e+3")).replace("M","e+6")).replace("B","e+9")).replace("T","e+12")),parseFloat(e)):null},D(e){if("number"!=typeof e)throw new Error("Expected number, got "+typeof e);if(e<1e3)return String(e);const t=e.toExponential(),[s,i]=t.split("e").map(Number);if(void 0===s||void 0===i)throw"compiler ritual etc";let o,n;i<15?(o=Math.floor(i/3),n=i%3):(o=4,n=i-12),console.log(o);return`${this.i(s*Math.pow(10,n),2)}${["","K","M","B","T"][o]}`},$(e){function t(){return e+" is not a number with a unit. Expected e.g. 1.23K"}if(/^\d*\.?\d*[A-z]$/.test(e)){const s=e.substring(0,e.length-1),i=Number(s);if(Number.isNaN(i))throw t();return[i,e[e.length-1]]}throw t()}};class Game{channel;constructor(e){this.channel=e}W(e){return"function"==typeof this[e]}say(e,t){"boolean"==typeof t&&!0===t?this.channel.say(e):this.channel.say(this.S+e)}sayTo(e,t,s){this.say(`${e}: ${t}`,s)}notice(e,t){"boolean"==typeof t&&!0===t?this.channel.notice(e):this.channel.notice(this.S+e)}noticeTo(e,t,s){"boolean"==typeof s&&!0===s?this.channel.noticeTo(e,t):this.channel.noticeTo(e,this.S+t)}}class MIGame extends Game{static R;static k;G;constructor(e,t){super(e),this.G=t}C(){console.log("MIGame.cleanup() called"),this.channel.endMIGame(this.G,this.R)}static factory(e,t,s,i){throw"Your game must override this method!"}static T(e){throw"Your game must override this method!"}static P(e,t,s){s.N[e]=t,s.v[e]=this.R}static F(e,t,s){s.B[e]=t,s.v[e]=this.R}}const echo=e=>e,c={red:echo,green:echo,A:echo,bold:echo,U:echo};c.bold.I={O:echo,K:echo};class DMPlayer{Y;j=null;q=!1;Z=1500;J=1500;V=100;X=0;ee=0;te=!1;se(e){if(this.J==this.Z)return 0;const t=this.J;this.J+=e,this.J>this.Z&&(this.J=this.Z);return this.J-t}constructor(e){this.Y=e}}export default class DeathMatch extends MIGame{R="dm";static R="dm";static k="!dm";name="Death Match";S=c.bold("[‚ÄØüî™ Death Match üßù‚ÄØ] ");session;static ie(e,t,s){DeathMatch.ne(e).oe(t,s)}static re(e,t,s){DeathMatch.ne(e).re(t,s)}constructor(e,t){super(e,t),this.session=null}ae(){if(null==this.session)throw"You are doing it wrong";this.session.weapons={"!surge":new DMW_Surge(this),"!whip":new DMW_Whip(this),"!onyx":new DMW_Onyx(this),"!ice":new DMW_Ice(this),"!dh":new DMW_DH(this),"!punch":new DMW_Punch(this),"!storm":new DMW_Storm(this),"!dbolt":new DMW_DBolt(this),"!poly":new DMW_Poly(this),"!dds":new DMW_DDS(this),"!maul":new DMW_Maul(this),"!zgs":new DMW_ZGS(this),"!korasi":new DMW_Korasi(this),"!dbow":new DMW_DBow(this),"!dclaws":new DMW_DClaws(this),"!sgs":new DMW_SGS(this),"!ags":new DMW_AGS(this),"!blood":new DMW_Blood(this),"!guth":new DMW_Guth(this),"!smoke":new DMW_Smoke(this),"!msb":new DMW_MSB(this),"!etc":new DMW_Etc(this)};for(const e of Object.keys(this.session.weapons)){const t=this.session.weapons[e];this.session.he[t.ce]=t}}replayWeapon(e){if(null==this.session)throw"Session is null";const t=this.session.he[e];if(!(t instanceof DMWeapon))throw"weapon is not weapon :( replayChar:"+e+" | weaponMaybe: "+t;const s=t,i=this.session.de==this.session.le?this.session.ge:this.session.le;s.me(this.session.de,i)}replaySetSeeds(e,t){if(null==this.session)throw"session null";this.session.le.j=e,this.session.ge.j=t,this.session.status="PLAYING",this.ue()}ue(){if(null==this.session)throw"session null";this.session.de=this.pe(),this.say("Ready to begin the game!"),this.say(`${this.session.de.Y} gets the first hit!`),this.session.status="PLAYING"}fe(e,t){this.we(e,"!surge")}Me(e,t){this.we(e,"!whip")}ye(e,t){this.we(e,"!onyx")}_e(e,t){this.we(e,"!ice")}He(e,t){this.we(e,"!dh")}Le(e,t){this.we(e,"!punch")}De(e,t){this.we(e,"!storm")}be(e,t){this.we(e,"!dbolt")}$e(e,t){this.we(e,"!poly")}xe(e,t){this.we(e,"!dds")}We(e,t){this.we(e,"!maul")}Se(e,t){this.we(e,"!zgs")}Ee(e,t){this.we(e,"!korasi")}Re(e,t){this.we(e,"!dbow")}ke(e,t){this.we(e,"!dclaws")}ze(e,t){this.we(e,"!sgs")}Ge(e,t){this.we(e,"!ags")}Ce(e,t){this.we(e,"!blood")}Te(e,t){this.we(e,"!guth")}Pe(e,t){this.we(e,"!smoke")}Ne(e,t){this.we(e,"!msb")}ve(e,t){this.we(e,"!etc")}static T(e){this.P("!dmstop","cmd_stop",e),this.F("!cancel","cmd_cancel",e),this.F("!spec","cmd_spec",e),this.F("!weapons","cmd_weapons",e),this.F("!weapon","cmd_weapon",e),this.F("!dmseed","cmd_dmseed",e),this.F("!surge","cmd_surge",e),this.F("!whip","cmd_whip",e),this.F("!onyx","cmd_onyx",e),this.F("!ice","cmd_ice",e),this.F("!dh","cmd_dh",e),this.F("!punch","cmd_punch",e),this.F("!storm","cmd_storm",e),this.F("!dbolt","cmd_dbolt",e),this.F("!poly","cmd_poly",e),this.F("!dds","cmd_dds",e),this.F("!maul","cmd_maul",e),this.F("!zgs","cmd_zgs",e),this.F("!korasi","cmd_korasi",e),this.F("!dbow","cmd_dbow",e),this.F("!dclaws","cmd_dclaws",e),this.F("!sgs","cmd_sgs",e),this.F("!ags","cmd_ags",e),this.F("!blood","cmd_blood",e),this.F("!guth","cmd_guth",e),this.F("!smoke","cmd_smoke",e),this.F("!msb","cmd_msb",e),this.F("!etc","cmd_etc",e)}we(e,t){if(null==this.session)throw"You're doing it wrong";const s=this.session.le,i=this.session.ge,o=e=>this.say(`Game hasn't started yet. ${e}, please choose a random seed with !dmseed <seed>`);if("GET_CLIENT_SEEDS"==this.session.status){const e=null==s.j,t=null==this.session.ge.j;if(e&&t)return o("Both players");if(e)return o(s.Y);if(t)return o(i.Y);throw this.say("Error: Unexpected condition. Session status is GET_CLIENT_SEEDS but all seeds have been set."),"Expected unset seeds but all seeds set"}if(e===s.Y)var n=s,r=i;else{if(e!==i.Y)throw this.say("Error: Unexpected condition. Received message from unknown player."),"ERROR: Got a message from someone ("+e+") that should not be able to message this game.";n=i,r=s}if(n!==this.session.de)return void this.sayTo(e,"Sorry, it's not your turn yet.");console.log("weapon cmd: "+t);const a=this.session.weapons[t];if(console.log("weapon lookup result: "+a),!(a instanceof DMWeapon))throw"Expected weapon, got "+a;const h=a;if(!h.enabled)return this.noticeTo(e,`Sorry, ${h.name} is not allowed in this match. Allowed weapons: ${this.Fe()}`);const c=h.Be(n);if(!0===c)return this.Ae(n,r,h);{const t=c;this.noticeTo(e,t)}}Ae(e,t,s){s.me(e,t)}Ue(e,t){return this.sayTo(e,"Sorry, !cancel isn't working yet.")}Ie(e,t){if(null==this.session)return this.sayTo(e,"ERROR: !spec called but DM session == null.");const s=this.session.le,i=this.session.ge;if(e===s.Y)var o=s;else{if(e!==i.Y)throw this.say("Error: Unexpected condition. Received message from unexpected nick: "+e),"ERROR: Got a message from someone ("+e+") that should not be able to message this game.";o=i}this.noticeTo(e,`You have ${c.green(o.V+"%")} special attack left for this game.`)}ie(e,t){if(null==this.session)return this.sayTo(e,"ERROR: !weapons called but DM session == null.");this.Oe(e)}oe(e,t){this.Ke(e)}Ye(){return Object.keys(this.session.weapons).join(" ")}Fe(){let e="";for(const t of Object.keys(this.session.weapons)){const s=this.session.weapons[t];s.enabled&&(e+=s.je,e+=" ")}return e}Oe(e){const t=this.Fe(),s=t.split(" ")[0].slice(1);"string"==typeof e?(this.noticeTo(e,"Allowed Weapons for this match: "+t),this.noticeTo(e,"Use !weapon <cmd> to find out more. Example: !weapon "+s)):(this.say("Allowed Weapons for this match: "+t),this.say("Use !weapon <cmd> to find out more. Example: !weapon "+s))}Ke(e){const t=this.Ye(),s=t.split(" ")[0].slice(1);this.noticeTo(e,"Death Match - All Weapons: "+t),this.noticeTo(e,"Use !weapon <cmd> to find out more. Example: !weapon "+s)}re(e,t){if(null==this.session)return this.sayTo(e,"ERROR: !weapon called but DM session == null.");if(1!==t.length)return this.noticeTo(e,"Please type a weapon command name, e.g. !weapon onyx");let s=t[0].toLowerCase();return"!"!==s.charAt(0)&&(s="!"+s),s in this.session.weapons?this.session.weapons[s].qe(e):this.noticeTo(e,"Sorry, I can't find this weapon.")}Ze(e,t){if(console.log(e,"cmd_dmseed",t),null==this.session)return this.sayTo(e,"ERROR: !dmseed called but DM session == null.");if("GET_CLIENT_SEEDS"!==this.session.status)return this.sayTo(e,"Seeds already set.");if(0==t.length)return this.sayTo(e,"Please type something random after !dmseed. Example: !dmseed ocean");let s="";return e===this.session.le.Y?null==this.session.le.j?(this.session.le.j=t[0],s+="Thank you. "):s+=this.session.le.Y+': Your seed was already set to "'+this.session.le.j+'". ':e===this.session.ge.Y&&(null==this.session.ge.j?(this.session.ge.j=t[0],s+="Thank you. "):s+=this.session.ge.Y+': Your seed was already set to "'+this.session.ge.j+'". '),null==this.session.le.j?this.say(`${s}Now ${this.session.le.Y}, please choose your seed.`):null==this.session.ge.j?this.say(`${s}Now ${this.session.ge.Y}, please choose your seed.`):void this.ue()}Je(){if(null==this.session)throw this.say("nextTurn() called but session is null"),"nextTurn() called but session == null";if("GET_CLIENT_SEEDS"==this.session.status)throw this.say("nextTurn() called but status is GET_CLIENT_SEEDS"),"nextTurn() called but session == null";this.Qe(),this.session.turn++}Qe(){if(null==this.session)throw this.say("toggleActivePlayer() called but session is null"),"newRotoggleActivePlayerund() called but session == null";if(null==this.session.de)throw this.say("toggleActivePlayer() called but session.activePlayer is null"),"toggleActivePlayer() called but session.activePlayer == null";if("GET_CLIENT_SEEDS"==this.session.status)throw this.say("toggleActivePlayer() called but status is GET_CLIENT_SEEDS"),"toggleActivePlayer() called but session == null";if(this.session.de==this.session.le)this.session.de=this.session.ge;else{if(this.session.de!=this.session.ge)throw this.say("Critical error in toggleActivePlayer"),"activePlayer is neither player1 nor player2";this.session.de=this.session.le}}static ne(e){const t=new DMPlayer("p1"),s=new DMPlayer("p2"),i=new DeathMatch(e,["p1","p2"]);return i.session={le:t,ge:s,Ve:0,Xe:"07",status:"GET_CLIENT_SEEDS",turn:0,de:null,RNG:new PFRNG(null),weapons:{},et:"",he:{}},i.ae(),i}static factory(e,t,s,i){const o=new DeathMatch(e,t);if(null!==o.session)return o.say("ERROR: A game is already in progress."),null;if(i.length<4)return o.sayTo(s,"Command format: !dm <user1> <user2> <amount> <currency> - Example: !dm john steve 50m 07"),null;const[n,r,a,h]=i;if("07"!==h)return o.sayTo(s,"Sorry, the only allowed currency is 07."),null;const c=o.channel.findNick(n);if(null===c)return o.say(`${s}: Error: Can't find user ${n} in this channel.`),null;const d=o.channel.findNick(r);if(null===d)return o.say(`${s}: Error: Can't find user ${r} in this channel.`),null;const l=new DMPlayer(c),g=new DMPlayer(d);if(l.Y===g.Y)return console.warn("Nicks equal!"),o.sayTo(s,"Error: Both players' nicknames are identical!"),null;const m=Util.L(a);if(null==m)return o.say("Error: Sorry, I don't understand that bet amount. Examples: 500, 1K, 2M, 50B, etc."),null;if(o.session={le:l,ge:g,Ve:m,Xe:h,status:"GET_CLIENT_SEEDS",turn:0,de:null,RNG:new PFRNG(null),weapons:{},et:"",he:{}},o.ae(),i.length>4){let e=0,t=0;const n=[],r=i.slice(4);for(const i of r){const r=i[0],a="!"+i.slice(1),h=o.session.weapons[a];if(!(h instanceof DMWeapon))return o.sayTo(s,"Error: Unknown weapon: "+i),null;if("+"===r)e++,h.enabled=!0,n.push(h);else{if("-"!==r)return o.sayTo(s,"Error: Unknown command: "+a),null;t++,h.enabled=!1}}if(e>0&&t>0)return o.sayTo(s,"Error: Can't use both + and -"),null;if(n.length>0)for(const e of Object.keys(o.session.weapons)){const t=o.session.weapons[e];n.includes(t)||(t.enabled=!1)}}return o.session.turn=1,o.say(`${l.Y} vs ${g.Y} - 2 Users bet ${Util.D(m)} each on ${h} - Server Seed (Hashed): ${o.session.RNG.tt}`),o.Oe(),o.say("For fair randomness, both players please type !dmseed <seed>, where <seed> is a random number or word."),o}pe(){if(null===this.session)throw"RNG_getStartingPlayer() called before game start";if(null===this.session.RNG)throw"RNG_getStartingPlayer() called before RNG init";const e=this.session.le.j,t=this.session.ge.j;if(null==e)throw"clientSeed1 is null!";if(null==t)throw"clientSeed2 is null!";const s=`${e}:${t}`,i=this.session.RNG.getHMAC(s,this.session.RNG.serverSeed),o=this.session.RNG.hashToInt(i,0,1);return[this.session.le,this.session.ge][o]}st(e,t){if(null===this.session)throw"get1to10() called before game start";if(null===this.session.RNG)throw"get1to10() called before RNG init";const s=this.session.turn,i=`${t}:${e.Y}:${s}:${e.j}`,o=this.session.RNG.getHMAC(i,this.session.RNG.serverSeed);return this.session.RNG.hashToInt(o,1,10)}it(e,t){if(null===this.session)throw"RNG_getHRBucket() called before game start";if(null===this.session.RNG)throw"RNG_getHRBucket() called before RNG init";const s=this.session.turn,i=`chance:${e.Y}:${s}:${t}:${e.j}`,o=this.session.RNG.getHMAC(i,this.session.RNG.serverSeed);return this.session.RNG.hashToInt(o,1,100)}ot(e,t,s,i){if(null===this.session)throw"RNG_getHRBucket() called before game start";if(null===this.session.RNG)throw"RNG_getHRBucket() called before RNG init";const o=this.session.turn,n=`dmg:${e.Y}:${o}:${i}:${e.j}`,r=this.session.RNG.getHMAC(n,this.session.RNG.serverSeed);return this.session.RNG.hashToInt(r,t,s)}nt(e,t){if(null===this.session)throw"Error: winGame() called but session is null.";this.say(`${t.Y} Has died!`);const s=Util.D(this.session.Ve),i=Util.D(2*this.session.Ve);this.say(`${e.Y} ${c.red("WINS")} the ${c.green(i)} üí∞ pot on ${c.A(this.session.Xe)} ‚ùóÔ∏è`);const o="https://si-gamebot.github.io/verify/dm/?"+function(e){let t="";for(let s of Object.keys(e))t+=`&${s}=${e[s]}`;return t.substring(1)}({rt:this.session.RNG.serverSeed,ht:this.session.le.Y,ct:this.session.ge.Y,dt:this.session.Xe,lt:s,gt:this.session.le.j,ut:this.session.ge.j,et:this.session.et});this.say("Provably fair: "+o),this.C()}}class DMWeapon{ft;enabled=!0;freeze=!1;wt=0;Mt=0;Be(e){const t=this.yt(e);if(!0!==t)return t;const s=this._t(e);return!0===s||s}yt(e){return!!this.Ht||(!e.q||"You cannot use a melee weapon while you are frozen!")}_t(e){const t=`You do NOT have enough special attack left! (${c.green(e.V)} left, ${c.green(this.V)} needed)`;return!(e.V<this.V)||t}Lt(){let e="!dh"==this.je?"HP":"CHANCE",t="";for(const s of this.Dt){const i=`${s.bt}-${s.$t} `+e,o=`${s.xt}-${s.Wt} DMG`;t+=`${c.red(i)} = ${c.green(o)}`,t+=" || "}return t.substring(0,t.length-4)}qe(e){this.ft.noticeTo(e,`Description: ${this.description}`),this.ft.noticeTo(e,`Hit Rates: ${this.Lt()}`),this.ft.noticeTo(e,`Hit Times: ${c.green(this.St)}`),this.ft.noticeTo(e,`Required Spec: ${c.green(this.V)}`),this.ft.noticeTo(e,`Minimum Damage: ${c.green(this.Et)}`),this.ft.noticeTo(e,`Maximum Damage: ${c.green(this.Rt)}`)}me(e,t){if(null==this.ft.session)throw"wtf";this.ft.session.et+=this.ce;const s=e=>{const t="‚Äá",s=15;const i=e.J,o=e.Z;if(i<0||i>o)throw this.ft.say("Critical error: Unexpected health value: "+i),"Unexpected health value: "+i;const n=Math.round(i/o*s),r=function(e){let i=String(e);for(;i.length<s;)i=t+i+t;return i.length>s&&(i=i.substring(1,i.length)),i}(i);let a="";for(let e=0;e<s;e++)a+=e<n?c.bold.I.O(r[e]):c.bold.I.K(r[e]);return a};let i=!1;if("!smoke"==this.je&&0==t.X&&this.ft.st(e,"poison")<=7&&(t.X=6,t.ee=40,i=!0),t.X>0){t.J-=t.ee,t.J<0&&(t.J=0);const s=i?"Start":"Still";if(this.ft.say(`${t.Y} ${s} suffers ${c.red(t.ee)} ‚ò† damage from poison!`),0==t.J)return this.ft.nt(e,t);t.ee-=2,t.X--}let o=0,n=[];for(let t=1;t<=this.St;t++){let s=null;if("!dh"==this.je)for(const t of this.Dt)e.J>=t.bt&&e.J<=t.$t&&(s=t);else{const i=this.ft.it(e,t);for(const e of this.Dt)i>=e.bt&&i<=e.$t&&(s=e)}if(null==s)throw this.ft.say("Critical Error: Could not find hit rate."),"Could not find hit rate";const i=this.ft.ot(e,s.xt,s.Wt,t);o+=i,n.push(i)}let r="";if(this.wt>0&&(10==this.wt||this.ft.st(e,"heal")<=this.wt)){const t=Math.round(o*this.Mt),s=e.se(t);r+=`, healing ${c.A(s)}`}if(e.V-=this.V,e.V<0)throw this.ft.say("Critical Error: Player spec is below zero!"),"player Spec < 0 !";t.J-=o,t.J<0&&(t.J=0);let a="";this.freeze&&("!ice"==this.je?e.te||(t.q=!0,a=c.U("freezing them, "),e.te=!0):(t.q=!0,a=c.U("freezing them, "))),e.q=!1,this.ft.Je();let h=null;h=1==this.St?String(o):`${n.join(" + ")} (${o})`;const d=this.ft.session.le,l=this.ft.session.ge,g=`${e.Y} ${this.kt} ${t.Y} ${this.zt} ${this.name} ${a}dealing ${c.red(h)} damage${r}.`,m=`${d.Y}: ${s(d)} - ${l.Y}: ${s(l)}`;if(this.ft.say(g),this.ft.say(m),0==t.J)return this.ft.nt(e,t);{const e=`${t.Y} gets the next hit!`;this.ft.say(e)}}constructor(e){this.ft=e}}class DMW_Surge extends DMWeapon{ce="r";je="!surge";name="Surge of Fire üî•";kt="casts at";zt="a";description=`Surge of Fire üî• can only be used if your hp is ${c.green(250)} or less, can also be used if you are frozen!`;Dt=[{bt:1,$t:40,xt:200,Wt:350},{bt:41,$t:65,xt:351,Wt:440},{bt:66,$t:100,xt:441,Wt:550}];St=1;V=0;Et=200;Rt=500;Ht=!0;Be(e){return e.J>250?`Surge of Fire üî• can only be used when your HP is ${c.green(250)} or lower!`:super.Be(e)}}class DMW_Whip extends DMWeapon{ce="w";je="!whip";name="Abyssal Whip üìø";kt="whips";zt="with an";description="Abyssal Whip üìø cannot be used if you are frozen!";Dt=[{bt:1,$t:30,xt:1,Wt:145},{bt:31,$t:60,xt:146,Wt:265},{bt:61,$t:100,xt:266,Wt:390}];St=1;V=0;Et=1;Rt=390;Ht=!1}class DMW_Onyx extends DMWeapon{ce="o";je="!onyx";name="Onyx Bolt ü•¢";kt="shoots at";zt="with an";description=`Onyx Bolt ü•¢ has ${c.green("50%")} chance to heal ${c.green("50%")} of damage dealt, can also be used if you are frozen!`;Dt=[{bt:1,$t:20,xt:1,Wt:125},{bt:21,$t:61,xt:126,Wt:275},{bt:62,$t:100,xt:276,Wt:375}];St=1;V=0;Et=1;Rt=375;wt=5;Mt=.5;Ht=!0}class DMW_Ice extends DMWeapon{ce="i";je="!ice";name="Ice Barrage ‚ùÑÔ∏è";kt="casts at";zt="an";description=`Ice Barrage ‚ùÑÔ∏è freezing the opponent with ${c.green("100%")} chance, freezing ability can only be used ${c.green(1)} time, freeze lasts one ${c.green(1)} turn, can also be used if you are frozen!`;Dt=[{bt:1,$t:20,xt:1,Wt:100},{bt:21,$t:81,xt:101,Wt:250},{bt:82,$t:100,xt:251,Wt:330}];St=1;V=0;Et=1;Rt=330;Ht=!0;freeze=!0}class DMW_DH extends DMWeapon{ce="c";je="!dh";name="Dharok's Greataxe ü™ì";kt="swings at";zt="with a";description="Dharok's Greataxe ü™ì the lower your hp you have the harder you can hit, cannot be used if you are frozen!";Dt=[{bt:1,$t:99,xt:200,Wt:910},{bt:100,$t:199,xt:175,Wt:550},{bt:200,$t:499,xt:100,Wt:450},{bt:500,$t:1500,xt:1,Wt:350}];St=1;V=0;Et=1;Rt=910;Ht=!1}class DMW_Punch extends DMWeapon{ce="q";je="!punch";name="Punch üëä";kt="swings at";zt="with a";description="Punch üëä cannot be used if you are frozen!";Dt=[{bt:1,$t:20,xt:1,Wt:90},{bt:21,$t:70,xt:91,Wt:185},{bt:71,$t:100,xt:186,Wt:295}];St=1;V=0;Et=1;Rt=295;Ht=!1}class DMW_Storm extends DMWeapon{ce="t";je="!storm";name="Storm of Armadyl üå™";kt="casts at";zt="a";description="Storm of Armadyl üå™ can also be used if you are frozen!";Dt=[{bt:1,$t:40,xt:100,Wt:190},{bt:41,$t:60,xt:191,Wt:290},{bt:61,$t:100,xt:291,Wt:340}];St=1;V=0;Et=100;Rt=340;Ht=!0}class DMW_DBolt extends DMWeapon{ce="e";je="!dbolt";name="Dragon Bolt (e) ü¶Ø";kt="shoots at";zt="with a";description="Dragon Bolt (e) ü¶Ø can also be used if you are frozen!";Dt=[{bt:1,$t:12,xt:1,Wt:175},{bt:13,$t:80,xt:176,Wt:374},{bt:81,$t:100,xt:375,Wt:600}];St=1;V=0;Et=1;Rt=600;Ht=!0}class DMW_Poly extends DMWeapon{ce="p";enabled=!1;je="!poly";name="Polypore Strike üî±";kt="lunges at";zt="with a";description="Polypore Strike üî± can only be played by itself, cannot be used if you are frozen!";Dt=[{bt:1,$t:40,xt:1,Wt:450},{bt:41,$t:100,xt:451,Wt:750}];St=1;V=0;Et=1;Rt=750;Ht=!1}class DMW_DDS extends DMWeapon{ce="d";je="!dds";name="Dragon Dagger üó°";kt="stabs";zt="with a";description="Dragon Dagger üó° cannot be used if you are frozen!";Dt=[{bt:1,$t:20,xt:1,Wt:100},{bt:21,$t:71,xt:101,Wt:175},{bt:72,$t:100,xt:176,Wt:230}];St=2;V=25;Et=1;Rt=230;Ht=!1}class DMW_Maul extends DMWeapon{ce="m";je="!maul";name="Granite Maul üî®";kt="swings at";zt="with a";description="Granite Maul üî® cannot be used if you are frozen!";Dt=[{bt:1,$t:13,xt:250,Wt:375},{bt:14,$t:74,xt:376,Wt:600},{bt:75,$t:100,xt:601,Wt:790}];St=1;V=100;Et=250;Rt=790;Ht=!1}class DMW_ZGS extends DMWeapon{ce="z";je="!zgs";name="Zamorak's Godsword üî™";kt="swings at";zt="with a";description="Zamorak's Godsword üî™ freezing the opponent until the next round, cannot be used if you are frozen!";Dt=[{bt:1,$t:40,xt:1,Wt:220},{bt:41,$t:80,xt:221,Wt:340},{bt:81,$t:100,xt:341,Wt:460}];St=1;V=50;Et=1;Rt=460;Ht=!1;freeze=!0}class DMW_Korasi extends DMWeapon{ce="k";je="!korasi";name="Korasi Spec „ÄΩÔ∏è";kt="swings at";zt="with a";description="Korasi Spec „ÄΩÔ∏è cannot be used if you are frozen!";Dt=[{bt:1,$t:10,xt:1,Wt:350},{bt:11,$t:71,xt:351,Wt:650},{bt:72,$t:100,xt:651,Wt:710}];St=1;V=75;Et=1;Rt=710;Ht=!1}class DMW_DBow extends DMWeapon{ce="D";je="!dbow";name="Dark Bow üèπ";kt="shoots";zt="with a";description="Dark Bow üèπ can be used if you are frozen!";Dt=[{bt:1,$t:15,xt:100,Wt:220},{bt:16,$t:70,xt:221,Wt:300},{bt:71,$t:100,xt:301,Wt:350}];St=2;V=75;Et=100;Rt=350;Ht=!0}class DMW_DClaws extends DMWeapon{ce="f";je="!dclaws";name="Dragon Claws üí¢";kt="slashes";zt="with";description="Dragon Claws üí¢ cannot be used if you are frozen!";Dt=[{bt:1,$t:20,xt:1,Wt:50},{bt:21,$t:100,xt:51,Wt:140}];St=4;V=50;Et=1;Rt=140;Ht=!1}class DMW_SGS extends DMWeapon{ce="s";je="!sgs";name="Saradomin Godsword ‚öí";kt="slashes";zt="with a";description=`Saradomin Godsword ‚öí healing ${c.green("50%")} of damage dealt, cannot be used if you are frozen!`;Dt=[{bt:1,$t:15,xt:50,Wt:200},{bt:16,$t:70,xt:201,Wt:350},{bt:71,$t:100,xt:351,Wt:450}];St=1;V=50;Et=50;Rt=450;wt=10;Mt=.5;Ht=!1}class DMW_AGS extends DMWeapon{ce="a";je="!ags";name="Armadyl Godsword ‚öîÔ∏è";kt="shoots";zt="with a";description="Armadyl Godsword ‚öîÔ∏è cannot be used if you are frozen.";Dt=[{bt:1,$t:20,xt:150,Wt:200},{bt:21,$t:61,xt:201,Wt:400},{bt:62,$t:100,xt:401,Wt:510}];St=1;V=50;Et=150;Rt=510;Ht=!1}class DMW_Blood extends DMWeapon{ce="b";je="!blood";name="Blood Barrage ü©∏";kt="casts at";zt="a";description=`Blood Barrage ü©∏ has ${c.green("100%")} chance to heal ${c.green("40%")} of damage dealt, can also be used if you are frozen!`;Dt=[{bt:1,$t:20,xt:1,Wt:100},{bt:21,$t:81,xt:101,Wt:280},{bt:82,$t:100,xt:281,Wt:330}];St=1;V=0;Et=1;Rt=330;wt=10;Mt=.4;Ht=!0}class DMW_Guth extends DMWeapon{ce="g";je="!guth";name="Guthan's Warspear ‚õè";kt="stabs";zt="with a";description=`Guthan's Warspear ‚õè has ${c.green("4/10")} chance to heal ${c.green("100%")} of damage dealt, cannot be used if you are frozen!`;Dt=[{bt:1,$t:20,xt:1,Wt:149},{bt:21,$t:81,xt:150,Wt:275},{bt:82,$t:100,xt:276,Wt:320}];St=1;V=0;Et=1;Rt=320;wt=4;Mt=1;Ht=!1}class DMW_Smoke extends DMWeapon{ce="u";je="!smoke";name="Smoke Barrage üí®";kt="casts at";zt="a";description=`Smoke Barrage üí® has ${c.green("70%")} chance to start poison the opponent for ${c.green(6)} rounds, cannot poison opponent again if already poisoned, can also be used if you are frozen.`;Dt=[{bt:1,$t:20,xt:1,Wt:200},{bt:21,$t:70,xt:201,Wt:300},{bt:71,$t:100,xt:301,Wt:350}];St=1;V=0;Et=1;Rt=350;Ht=!0}class DMW_MSB extends DMWeapon{ce="l";je="!msb";name="Magic Shortbow üçÉ";kt="shoots";zt="with a";description="Magic Shortbow üçÉ can be used if you are frozen!";Dt=[{bt:1,$t:20,xt:75,Wt:150},{bt:21,$t:81,xt:151,Wt:230},{bt:82,$t:100,xt:231,Wt:300}];St=2;V=50;Et=75;Rt=300;Ht=!0}class DMW_Etc extends DMWeapon{ce="E";je="!etc";name="Etc üçÉ";kt="etc";zt="etc";description="etc";Dt=[{bt:1,$t:20,xt:1,Wt:2},{bt:21,$t:81,xt:3,Wt:4},{bt:82,$t:100,xt:5,Wt:6}];St=1;V=0;Et=1;Rt=6;Ht=!0}